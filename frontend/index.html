<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="home-title">ูุธุงู ุงูุญุถูุฑ ูุงูุบูุงุจ</title>
  <link rel="stylesheet" href="/styles.css" />
  <style>
    header nav { display:flex; gap:12px; }
    header .controls { margin-top:8px; }
  </style>
  
</head>
<body>
  <header>
    <h1 id="home-heading">ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุถูุฑ ูุงูุบูุงุจ</h1>
    <nav>
      <a id="nav-dashboard" href="/dashboard.html"><img class="icon" src="/assets/icons/speedometer2.svg" style="vertical-align:middle;margin-inline-end:6px"/>ููุญุฉ ุงูุนุฑุถ</a>
      <a id="nav-admin" href="/admin.html"><img class="icon" src="/assets/icons/gear.svg" style="vertical-align:middle;margin-inline-end:6px"/>ููุญุฉ ุงูุฅุฏุงุฑุฉ</a>
      <a id="nav-reports" href="/reports.html"><img class="icon" src="/assets/icons/file-earmark-text.svg" style="vertical-align:middle;margin-inline-end:6px"/>ุงูุชูุงุฑูุฑ</a>
      <a id="nav-students" href="/students.html"><img class="icon" src="/assets/icons/people.svg" style="vertical-align:middle;margin-inline-end:6px"/>ุงูุทูุงุจ</a>
    </nav>
    <div class="controls"><button id="toggle-lang">EN/AR</button></div>
  </header>
  <main>
    <div class="tab-bar" id="home-tabs">
      <button class="tab-button" data-tab="welcome">ุงูุฑุฆูุณูุฉ</button>
      <button class="tab-button active" data-tab="today">ุนุฑุถ ุงูููู</button>
    </div>
    <section class="tab-section" data-tab="welcome">
      <p id="welcome-text">ูุฑุญุจูุง ุจู! ุงูุชูู ุฅูู ููุญุฉ ุงูุนุฑุถ ููุงุทูุงุน ุนูู ุญุงูุฉ ุงูุทูุงุจ.</p>
    </section>
    <section class="tab-section active" data-tab="today">
      <h2>ุญุงูุฉ ุงูุญุถูุฑ ุงูููู</h2>
      <div id="homeBadge" style="margin:8px 0"></div>
      <div id="homeCounters" style="display:flex; gap:12px; flex-wrap:wrap; margin-bottom:10px"></div>
      <div id="homeExportLink" style="margin:6px 0"></div>
      <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-bottom:8px">
        <label>ุงูุตู</label>
        <input type="text" id="homeClassFilter" placeholder="ูุซุงู: ุงูุซุงูุซ ูุชูุณุท" />
        <label>ุงูุดุนุจุฉ</label>
        <input type="text" id="homeSectionFilter" placeholder="ูุซุงู: ุฃ" />
        <label>ุงููุฑุญูุฉ</label>
        <select id="homeStageFilter">
          <option value="">ุงููู</option>
          <option value="middle">ุงููุชูุณุทุฉ</option>
          <option value="high">ุงูุซุงูููุฉ</option>
        </select>
        <label>ุงูุญุงูุฉ</label>
        <select id="homeStatusFilter">
          <option value="">ุงููู</option>
          <option value="present">ุญุถูุฑ</option>
          <option value="absent">ุบูุงุจ</option>
          <option value="late">ุชุฃุฎุฑ</option>
          <option value="not_yet">ูู ูุตู ุจุนุฏ</option>
        </select>
        <button id="homeRefresh">ุชุญุฏูุซ</button>
        <button id="homeExportPdf">ุชุตุฏูุฑ PDF</button>
      </div>
      <div class="cards" id="homeCards"></div>
    </section>
  </main>
  <footer class="footer-fixed">ุญููู ุงูุจุฑูุฌุฉ: ุนูุถ ูุงูู ุงูุฒุจูุฏู โ ูุฏุฑุณุฉ ุงููุงุฑูู ุจุงููุธููู</footer>
  <script>
    const i18n = {
      ar: {
        homeTitle: 'ูุธุงู ุงูุญุถูุฑ ูุงูุบูุงุจ',
        homeHeading: 'ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุถูุฑ ูุงูุบูุงุจ',
        navDashboard: 'ููุญุฉ ุงูุนุฑุถ ๐',
        navAdmin: 'ููุญุฉ ุงูุฅุฏุงุฑุฉ โ๏ธ',
        navReports: 'ุงูุชูุงุฑูุฑ ๐',
        navStudents: 'ุงูุทูุงุจ ๐จโ๐',
        welcome: 'ูุฑุญุจูุง ุจู! ุงูุชูู ุฅูู ููุญุฉ ุงูุนุฑุถ ููุงุทูุงุน ุนูู ุญุงูุฉ ุงูุทูุงุจ.'
      },
      en: {
        homeTitle: 'Attendance System',
        homeHeading: 'Student Attendance Management System',
        navDashboard: 'Dashboard ๐',
        navAdmin: 'Admin Panel โ๏ธ',
        navReports: 'Reports ๐',
        navStudents: 'Students ๐จโ๐',
        welcome: 'Welcome! Go to Dashboard to view student status.'
      }
    };

    function applyLang(lang) {
      const t = i18n[lang] || i18n.ar;
      document.documentElement.lang = lang === 'ar' ? 'ar' : 'en';
      document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
      const setText = (id, text) => { const el = document.getElementById(id); if (el) el.textContent = text; };
      setText('home-title', t.homeTitle);
      setText('home-heading', t.homeHeading);
      setText('nav-dashboard', t.navDashboard);
      setText('nav-admin', t.navAdmin);
      setText('nav-reports', t.navReports);
      setText('nav-students', t.navStudents);
      setText('welcome-text', t.welcome);
    }

    const savedLang = localStorage.getItem('lang') || 'ar';
    applyLang(savedLang);
    document.getElementById('toggle-lang')?.addEventListener('click', () => {
      const next = (localStorage.getItem('lang') || 'ar') === 'ar' ? 'en' : 'ar';
      localStorage.setItem('lang', next);
      applyLang(next);
    });
    // Home tabs
    document.querySelectorAll('#home-tabs .tab-button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('#home-tabs .tab-button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const tab = btn.getAttribute('data-tab');
        document.querySelectorAll('main .tab-section').forEach(sec => {
          sec.style.display = (sec.getAttribute('data-tab') === tab) ? 'block' : 'none';
        });
      });
    });
    document.querySelectorAll('main .tab-section').forEach(sec => { if (!sec.classList.contains('active')) sec.style.display = 'none'; });
  </script>
  <script src="/home.js"></script>
</body>
</html>
